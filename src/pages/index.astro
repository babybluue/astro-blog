---
import { config, description, getPostLink, quote, title } from '@constant'

import AvatarImage from '@components/avatar-image.astro'
import NavLink from '@components/nav-link.astro'
import BaseLayout from '@layouts/base-layout.astro'
import { getAllPosts } from '@utils/all-posts'
import { getMD } from '@utils/date-helper'

const latestPost = (await getAllPosts()).slice(0, config.latestPostsCount)
---

<BaseLayout title={title} description={description}>
  <main class="min-h-[100dvh]">
    <section class="flex flex-col items-center justify-center">
      <AvatarImage />
      <div class="w-full px-10 text-center max-[768px]:px-0">
        "{quote}"
      </div>
    </section>
    <section
      class="mx-auto my-6 flex items-center justify-center gap-10 whitespace-nowrap max-[768px]:my-5 max-[768px]:gap-5"
    >
      <NavLink />
    </section>
    <section class="m-auto flex w-[70%] flex-col justify-center pb-4 max-[768px]:w-[80%] min-[1100px]:w-[55%]">
      {
        latestPost.map((post) => (
          <article class="flex justify-between gap-x-3 py-2 max-[500px]:gap-x-5">
            <a class="flex-1 truncate" href={getPostLink(post)}>
              {post.data.title}
            </a>
            <time datetime={post.data.date.toISOString()}>{getMD(post.data.date)}</time>
          </article>
        ))
      }
    </section>
  </main>
</BaseLayout>
